<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Redirect | Admin Perpus BI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
</head>
<body class="bg-body-secondary d-flex flex-column align-items-center justify-content-center min-vh-100">
    <h1>Mohon tunggu sebentar.....</h1>
    <h2>Kamu akan dituju ke halaman selanjutnya</h2>
</body>
<script src="./js/const.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="./js/isLoggedIn.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
<script>
    axios.get(
        `${BASE_URL}/auth/me`,
        {
            withCredentials: true,
            headers: {
                'Access-Control-Allow-Origin': '*',
                'Content-Type': 'application/json'
            }
        }
    ).then(response => {
        if (response.status != 200) {
            location.href = '/login.html';
            return;
        }

        if (response.data.role == 'admin') {
            location.href = '/admin/accounts.html';
        } else if (response.data.role == 'staff') {
            location.href = '/admin/accounts.html';
        } else if (response.data.role == 'anggota') {
            location.href = '/books.html';
        }
    }).catch(_ => {
        location.href = '/login.html';
    });
</script>
</html>